var lowOrHigh = "Highest";

var playerTurn = 0; //checks whose turn is it
var maxPlayers = 2; //number of players

var gameRound = 1;
var roundScoreBoard = []; //gather the
var totalScoreBoard = []; //

var leaderBoard = [];
var leaderBoardSequence = [];

//create Random number
var generateRandomNum = function () {
  return Math.ceil(Math.random() * 9);
};

//sorts the user dice roll from highest to lowest
var highestNum = function (numOrder) {
  return numOrder.sort().reverse();
};

//sorts the user dice roll from lowest to highest
var lowestNum = function (numStore) {
  return numOrder.sort();
};

var getPlayerSequence = function () {
  for (let i = 0; i < totalScoreBoard.length; i++)
    leaderBoardSequence[i] = i + 1;
};

var getLeaderboards = function () {
  leaderBoard = totalScoreBoard;
  getPlayerSequence();
  for (let i = 0; i < leaderBoard.length; i++) {
    for (let j = 0; j < leaderBoard.length - i - 1; j++) {
      if (leaderBoard[j] < leaderBoard[j + 1]) {
        var temp = leaderBoard[j + 1];
        var tempSeq = leaderBoardSequence[j + 1];

        leaderBoard[j + 1] = leaderBoard[j];
        leaderBoardSequence[j + 1] = leaderBoardSequence[j];

        leaderBoard[j] = temp;
        leaderBoardSequence[j] = tempSeq;
      }
    }
  }
};

//display End of Round game stats
var gameStats = function () {
  getLeaderboards();
  var gameStatString = `Total Game Stats: <br>`;
  for (let player = 0; player < leaderBoard.length; player++) {
    gameStatString += `Player ${leaderBoardSequence[player]}: ${leaderBoard[player]}<br>`;
  }
  return gameStatString;
};

// Game Proper
var gameProper = function () {
  var userNumberStore = []; //random number generated | temporary storage
  for (let num = 0; num < 2; num++) userNumberStore.push(generateRandomNum()); //generated number

  var numString = `You rolled: `; //displayed numbers
  for (let userNum = 0; userNum < userNumberStore.length; userNum++) {
    numString += `${userNumberStore[userNum]} | `;
  }

  var orderednum = [];
  var orderedNumString = `The autogenerated ${lowOrHigh} Number: `;
  if (lowOrHigh == "Highest") orderednum = highestNum(userNumberStore);
  else orderednum = lowestNum(userNumberStore);

  var intUserNum = 0;
  for (let genNum = 0; genNum < orderednum.length; genNum++) {
    if (intUserNum == 0) intUserNum = Number(orderednum[genNum]);
    else intUserNum = intUserNum * 10 + Number(orderednum[genNum]);
  }

  orderedNumString += intUserNum;

  if (playerTurn == maxPlayers) {
    playerTurn = 0;
    gameRound += 1;

    if (totalScoreBoard.length <= 0) {
      for (let i = 0; i < roundScoreBoard.length; i++) {
        totalScoreBoard[i] = roundScoreBoard[i];
        console.log(`Player ${i}`, totalScoreBoard[i]);
      }
    } else {
      for (let i = 0; i < roundScoreBoard.length; i++) {
        totalScoreBoard[i] += roundScoreBoard[i];
        console.log(`Player ${i}`, totalScoreBoard[i]);
      }
    }
    return `- End of Round - <br> ${gameStats()}`;
  } else {
    roundScoreBoard[playerTurn] = intUserNum;
    playerTurn += 1; //increase player

    return `Round ${gameRound} <br> Welcome Player ${playerTurn}!<br> ${numString} <br> ${orderedNumString}.`;
  }
};

var main = function (input) {
  return gameProper();
};
